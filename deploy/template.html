<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta
      name="viewport"
      content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no"
    />
    <title>Farcaster Manifesto</title>

    <!-- Open Graph -->
    <meta property="og:title" content="Farcaster Manifesto" />
    <meta
      property="og:description"
      content="A community manifesto for Farcaster."
    />
    <meta property="og:image" content="https://farcaster.lat/images/og.png" />
    <meta property="og:url" content="https://farcaster.lat" />
    <meta property="og:type" content="website" />

    <!-- Farcaster Mini App Embed -->
    <meta
      name="fc:miniapp"
      content='{"version":"1","imageUrl":"https://farcaster.lat/images/embed.png","button":{"title":"Read  Manifesto","action":{"type":"launch_miniapp","name":"Farcaster Manifesto","url":"https://farcaster.lat","splashImageUrl":"https://farcaster.lat/images/splash.png","splashBackgroundColor":"#7D65C1"}}}'
    />

    <!-- Preconnect for Quick Auth -->
    <link rel="preconnect" href="https://auth.farcaster.xyz" />

    <link
      href="https://fonts.googleapis.com/css2?family=Inter:ital,wght@0,300;0,400;0,500;0,600;0,700;0,800;0,900;1,300;1,400;1,500&display=swap"
      rel="stylesheet"
    />
    <style>
      :root {
        --purple: #9c70ed;
        --purple-deep: #3d2e6e;
        --purple-dark: #1a1233;
        --purple-abyss: #110d22;
        --purple-mid: #6550a8;
        --purple-light: #9b85d6;
        --purple-glow: #c4b3e8;
        --purple-faint: rgba(125, 101, 193, 0.18);
        --purple-ghost: rgba(125, 101, 193, 0.06);
        --white: #ffffff;
        --w95: rgba(255, 255, 255, 0.95);
        --w80: rgba(255, 255, 255, 0.8);
        --w65: rgba(255, 255, 255, 0.65);
        --w50: rgba(255, 255, 255, 0.5);
        --w30: rgba(255, 255, 255, 0.3);
        --w15: rgba(255, 255, 255, 0.15);
        --w08: rgba(255, 255, 255, 0.08);
        --w04: rgba(255, 255, 255, 0.04);
        --gold: #f0c050;
        --gold-soft: rgba(240, 192, 80, 0.8);
      }

      * {
        margin: 0;
        padding: 0;
        box-sizing: border-box;
      }

      ::selection {
        background: var(--purple-light);
        color: var(--purple-abyss);
      }

      html {
        scroll-behavior: smooth;
        scrollbar-width: thin;
        scrollbar-color: var(--purple-mid) var(--purple-dark);
        overflow-x: hidden;
      }

      body {
        font-family: "Inter", sans-serif;
        background: var(--purple);
        color: var(--w80);
        line-height: 1.8;
        overflow-x: hidden;
        font-size: 16px;
        -webkit-font-smoothing: antialiased;
      }

      /* ═══ BG ═══ */
      .bg {
        position: fixed;
        inset: 0;
        z-index: 0;
        pointer-events: none;
        background:
          radial-gradient(
            ellipse 100% 70% at 50% 0%,
            rgba(100, 80, 168, 0.35) 0%,
            transparent 55%
          ),
          radial-gradient(
            ellipse 50% 50% at 10% 40%,
            rgba(155, 133, 214, 0.06) 0%,
            transparent 50%
          ),
          var(--purple);
      }

      .bg::after {
        content: "";
        position: absolute;
        inset: 0;
        background: url("data:image/svg+xml,%3Csvg viewBox='0 0 512 512' xmlns='http://www.w3.org/2000/svg'%3E%3Cfilter id='n'%3E%3CfeTurbulence type='fractalNoise' baseFrequency='0.7' numOctaves='4' stitchTiles='stitch'/%3E%3C/filter%3E%3Crect width='100%25' height='100%25' filter='url(%23n)' opacity='0.035'/%3E%3C/svg%3E");
        opacity: 0.5;
      }

      /* ═══ NAV ═══ */
      nav {
        position: fixed;
        inset: 0 0 auto 0;
        z-index: 100;
        padding: 1.1rem 2.5rem;
        display: flex;
        justify-content: space-between;
        align-items: center;
        transition: all 0.4s ease;
      }

      nav.scrolled {
        background: rgba(26, 18, 51, 0.92);
        backdrop-filter: blur(20px);
        -webkit-backdrop-filter: blur(20px);
        border-bottom: 1px solid var(--w08);
      }

      .nav-logo {
        display: flex;
        align-items: center;
        gap: 0.65rem;
        text-decoration: none;
      }

      .nav-logo img {
        height: 26px;
        width: auto;
        border-radius: 6px;
      }

      .nav-logo span {
        font-weight: 600;
        font-size: 0.95rem;
        color: var(--white);
        letter-spacing: -0.01em;
      }

      .nav-links {
        display: flex;
        gap: 1.8rem;
        list-style: none;
      }

      .nav-links a {
        font-size: 0.78rem;
        font-weight: 500;
        color: var(--w50);
        text-decoration: none;
        transition: color 0.3s;
      }

      .nav-links a:hover {
        color: var(--white);
      }

      /* ═══ HERO ═══ */
      .hero {
        position: relative;
        min-height: 100vh;
        display: flex;
        flex-direction: column;
        justify-content: center;
        align-items: center;
        text-align: center;
        padding: 8rem 2rem 6rem;
        z-index: 1;
      }

      .hero::before {
        content: "";
        position: absolute;
        top: 18%;
        left: 50%;
        transform: translate(-50%, -50%);
        width: min(480px, 100vw);
        height: min(480px, 100vw);
        background: radial-gradient(
          circle,
          rgba(155, 133, 214, 0.12) 0%,
          transparent 65%
        );
        border-radius: 50%;
        animation: breathe 10s ease-in-out infinite;
      }

      @keyframes breathe {
        0%,
        100% {
          transform: translate(-50%, -50%) scale(1);
          opacity: 0.5;
        }
        50% {
          transform: translate(-50%, -50%) scale(1.18);
          opacity: 1;
        }
      }

      .hero-logo {
        width: 84px;
        height: 84px;
        margin-bottom: 2.5rem;
        animation: float 7s ease-in-out infinite;
        filter: brightness(1.15);
      }

      @keyframes float {
        0%,
        100% {
          transform: translateY(0);
        }
        50% {
          transform: translateY(-9px);
        }
      }

      .hero-badge {
        display: inline-block;
        font-size: 0.68rem;
        font-weight: 600;
        letter-spacing: 0.16em;
        text-transform: uppercase;
        color: var(--w65);
        background: var(--w08);
        border: 1px solid var(--w15);
        padding: 0.4rem 1.1rem;
        border-radius: 100px;
        margin-bottom: 2.2rem;
      }

      .hero h1 {
        font-weight: 300;
        font-size: clamp(2.6rem, 7vw, 5rem);
        line-height: 1.1;
        color: var(--white);
        margin-bottom: 1.6rem;
        max-width: 780px;
        letter-spacing: -0.03em;
      }

      .hero h1 strong {
        font-weight: 800;
      }

      .hero-sub {
        font-size: 1.1rem;
        font-weight: 300;
        color: var(--w65);
        max-width: 500px;
        line-height: 1.8;
        margin-bottom: 3rem;
      }

      .hero-cta {
        display: inline-flex;
        align-items: center;
        gap: 0.5rem;
        padding: 0.85rem 1.8rem;
        background: var(--white);
        color: var(--purple);
        text-decoration: none;
        font-size: 0.82rem;
        font-weight: 600;
        border-radius: 8px;
        transition: all 0.3s;
      }

      .hero-cta:hover {
        transform: translateY(-2px);
        box-shadow: 0 12px 40px rgba(0, 0, 0, 0.2);
      }

      .scroll-hint {
        position: absolute;
        bottom: 2.2rem;
        left: 50%;
        transform: translateX(-50%);
        color: var(--w30);
        font-size: 0.68rem;
        font-weight: 500;
        letter-spacing: 0.12em;
        text-transform: uppercase;
        animation: pulse-d 2.5s ease-in-out infinite;
      }

      @keyframes pulse-d {
        0%,
        100% {
          opacity: 0.3;
          transform: translateX(-50%) translateY(0);
        }
        50% {
          opacity: 0.7;
          transform: translateX(-50%) translateY(5px);
        }
      }

      /* ═══ CONTENT ═══ */
      .content {
        position: relative;
        z-index: 1;
      }

      section {
        padding: 6rem 2rem;
        max-width: 720px;
        margin: 0 auto;
      }
      .section-wide {
        max-width: 1020px;
      }

      .divider {
        width: 100%;
        max-width: 720px;
        margin: 0 auto;
        height: 1px;
        background: var(--w08);
      }

      .ch {
        font-size: 0.68rem;
        font-weight: 600;
        letter-spacing: 0.16em;
        text-transform: uppercase;
        color: var(--purple-glow);
        margin-bottom: 1rem;
      }

      h2 {
        font-weight: 300;
        font-size: clamp(1.9rem, 4.5vw, 2.8rem);
        color: var(--white);
        line-height: 1.2;
        margin-bottom: 1.8rem;
        letter-spacing: -0.025em;
      }
      h2 strong {
        font-weight: 800;
      }

      h3 {
        font-weight: 700;
        font-size: 1.15rem;
        color: var(--white);
        margin-top: 2.8rem;
        margin-bottom: 1rem;
        letter-spacing: -0.01em;
      }

      p {
        margin-bottom: 1.3rem;
        font-weight: 400;
        font-size: 0.98rem;
      }
      p.lead {
        font-size: 1.1rem;
        line-height: 1.9;
        color: var(--w95);
        font-weight: 300;
      }
      /* pandoc compat: .lead as wrapper div instead of p class */
      p.lead,
      .lead p {
        font-size: 1.1rem;
        line-height: 1.9;
        color: var(--w95);
        font-weight: 300;
      }

      /* pandoc compat: reset <p> margins inside short-text containers */
      .ch p,
      .layer-tag p,
      .pathway-num p,
      .g-term p,
      .g-def p,
      .token-card-name p,
      .token-card-pct p,
      .card .meta p,
      .raw .raw-sig p,
      .voice .sig p,
      .footer-end p {
        margin: 0;
      }

      /* pandoc compat: token-card-header spans get wrapped in <p> */
      .token-card-header p {
        display: flex;
        justify-content: space-between;
        align-items: baseline;
        margin: 0;
        gap: 1rem;
      }

      strong {
        color: var(--white);
        font-weight: 600;
      }
      em {
        font-style: italic;
        color: var(--w95);
      }

      a {
        color: var(--purple-glow);
        text-decoration: none;
        border-bottom: 1px solid rgba(196, 179, 232, 0.3);
        transition: all 0.3s;
      }
      a:hover {
        color: var(--white);
        border-color: var(--w50);
      }

      code {
        font-family: "SF Mono", "Fira Code", "Consolas", monospace;
        font-size: 0.83em;
        color: var(--purple-glow);
        background: var(--w08);
        padding: 0.12em 0.4em;
        border-radius: 3px;
      }

      /* ═══ VOICE BLOCKS ═══ */
      .voice {
        position: relative;
        padding: 2rem 0 2rem 2.2rem;
        margin: 2.2rem 0;
        border-left: 3px solid var(--purple-light);
      }

      .voice p {
        font-size: 1.05rem;
        line-height: 1.95;
        color: var(--white);
        font-weight: 300;
        font-style: italic;
        margin-bottom: 0.7rem;
      }
      .voice p:last-of-type {
        margin-bottom: 0;
      }
      .voice .sig {
        font-style: normal;
        font-size: 0.78rem;
        color: var(--w50);
        margin-top: 1rem;
        font-weight: 500;
      }

      /* RAW — personal testimony */
      .raw {
        position: relative;
        padding: 2.5rem;
        margin: 2.5rem 0;
        background: rgba(0, 0, 0, 0.2);
        border: 1px solid var(--w08);
        border-radius: 12px;
      }

      .raw p {
        font-size: 0.95rem;
        line-height: 1.85;
        color: var(--w65);
        margin-bottom: 1.1rem;
      }
      .raw p:last-of-type {
        margin-bottom: 0;
      }
      .raw p strong {
        color: var(--white);
      }
      .raw .raw-sig {
        font-size: 0.78rem;
        color: var(--w30);
        margin-top: 1.8rem;
        font-weight: 500;
      }

      /* ═══ CARDS ═══ */
      .cards {
        display: grid;
        grid-template-columns: 1fr;
        gap: 1px;
        margin: 2.2rem 0;
        background: var(--w08);
        border-radius: 12px;
        overflow: hidden;
      }

      .card {
        padding: 1.8rem 2rem;
        background: rgba(26, 18, 51, 0.7);
        transition: background 0.3s;
      }
      .card:hover {
        background: rgba(50, 38, 90, 0.7);
      }
      .card h4 {
        font-weight: 600;
        font-size: 0.95rem;
        color: var(--white);
        margin-bottom: 0.5rem;
      }
      .card p {
        font-size: 0.88rem;
        color: var(--w65);
        margin-bottom: 0;
        line-height: 1.7;
      }
      .card .meta {
        font-size: 0.73rem;
        color: var(--purple-glow);
        margin-top: 0.7rem;
        font-weight: 500;
        opacity: 0.7;
      }

      /* ═══ LAYERS ═══ */
      .layers {
        margin: 2.5rem 0;
        border: 1px solid var(--w08);
        border-radius: 12px;
        overflow: hidden;
      }

      .layer {
        display: flex;
        align-items: flex-start;
        gap: 1.3rem;
        padding: 1.5rem 1.8rem;
        border-bottom: 1px solid var(--w04);
        background: rgba(26, 18, 51, 0.5);
        transition: background 0.3s;
      }

      .layer:last-child {
        border-bottom: none;
      }
      .layer:hover {
        background: rgba(50, 38, 90, 0.4);
      }
      .layer-tag {
        font-size: 0.62rem;
        font-weight: 600;
        letter-spacing: 0.1em;
        text-transform: uppercase;
        color: var(--purple-glow);
        min-width: 72px;
        padding-top: 0.15rem;
        flex-shrink: 0;
      }
      .layer-body h4 {
        font-weight: 600;
        font-size: 0.95rem;
        color: var(--white);
        margin-bottom: 0.3rem;
      }
      .layer-body p {
        font-size: 0.85rem;
        color: var(--w50);
        margin: 0;
        line-height: 1.65;
      }

      /* ═══ PATHWAYS ═══ */
      .pathways {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(260px, 1fr));
        gap: 0.8rem;
        margin: 2.2rem 0;
      }

      .pathway {
        padding: 1.8rem;
        background: rgba(26, 18, 51, 0.6);
        border: 1px solid var(--w08);
        border-radius: 12px;
        transition: all 0.3s;
        display: block;
        text-decoration: none;
      }

      .pathway:hover {
        transform: translateY(-2px);
        border-color: var(--w15);
        box-shadow: 0 14px 44px rgba(0, 0, 0, 0.18);
        background: rgba(50, 38, 90, 0.5);
      }
      .pathway-num {
        font-size: 2.2rem;
        font-weight: 200;
        color: var(--w15);
        line-height: 1;
        margin-bottom: 0.8rem;
      }
      .pathway h4 {
        font-weight: 600;
        font-size: 0.95rem;
        color: var(--white);
        margin-bottom: 0.6rem;
      }
      .pathway p {
        font-size: 0.85rem;
        color: var(--w50);
        line-height: 1.65;
        margin-bottom: 0.8rem;
      }
      .pathway .plink {
        font-size: 0.72rem;
        font-weight: 600;
        color: var(--purple-glow);
        border: none;
        letter-spacing: 0.02em;
      }

      /* ═══ GLOSSARY ═══ */
      .glossary {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(220px, 1fr));
        gap: 1px;
        background: var(--w08);
        border-radius: 12px;
        overflow: hidden;
        margin: 2.2rem 0;
      }

      .g {
        padding: 1.3rem 1.5rem;
        background: rgba(26, 18, 51, 0.7);
      }
      .g-term {
        font-weight: 600;
        font-size: 0.9rem;
        color: var(--white);
        margin-bottom: 0.3rem;
      }
      .g-def {
        font-size: 0.82rem;
        color: var(--w50);
        line-height: 1.6;
        margin: 0;
      }

      /* ═══ TECH NOTE ═══ */
      .tn {
        font-size: 0.82rem;
        color: var(--w50);
        background: var(--w04);
        border-left: 3px solid var(--purple-light);
        padding: 1.1rem 1.3rem;
        margin: 1.8rem 0;
        border-radius: 0 8px 8px 0;
        line-height: 1.7;
      }

      .tn strong {
        color: var(--purple-glow);
      }

      /* ═══ TOKENOMICS TABLE ═══ */
      /* ═══ TOKEN CARDS (replaces table) ═══ */
      .token-cards {
        display: flex;
        flex-direction: column;
        gap: 1px;
        background: var(--w08);
        border-radius: 12px;
        overflow: hidden;
        margin: 2rem 0;
      }

      .token-card {
        background: rgba(26, 18, 51, 0.7);
        padding: 1.8rem 2rem;
        transition: background 0.3s;
      }

      .token-card:hover {
        background: rgba(50, 38, 90, 0.7);
      }

      .token-card-header {
        display: flex;
        justify-content: space-between;
        align-items: baseline;
        margin-bottom: 0.8rem;
        gap: 1rem;
      }

      .token-card-name {
        font-weight: 600;
        font-size: 0.95rem;
        color: var(--white);
      }

      .token-card-pct {
        font-weight: 600;
        font-size: 0.95rem;
        color: var(--purple-glow);
        font-variant-numeric: tabular-nums;
        flex-shrink: 0;
      }

      .token-card-body {
        font-size: 0.88rem;
        color: var(--w65);
        line-height: 1.7;
      }

      .token-card-body strong {
        color: var(--white);
      }

      /* TOKEN BAR VISUAL */
      .token-bar {
        display: flex;
        height: 32px;
        border-radius: 8px;
        overflow: hidden;
        margin: 2rem 0 0.8rem;
        gap: 2px;
      }

      .token-bar > div {
        display: flex;
        align-items: center;
        justify-content: center;
        font-size: 0.6rem;
        font-weight: 700;
        letter-spacing: 0.04em;
        color: rgba(0, 0, 0, 0.6);
        transition: flex 0.4s;
      }

      .tb-retro {
        background: #c4b3e8;
        flex: 35;
      }
      .tb-build {
        background: #9b85d6;
        flex: 20;
      }
      .tb-dao {
        background: #7d65c1;
        flex: 20;
        color: rgba(255, 255, 255, 0.7) !important;
      }
      .tb-liq {
        background: #6550a8;
        flex: 10;
        color: rgba(255, 255, 255, 0.7) !important;
      }
      .tb-node {
        background: #3d2e6e;
        flex: 5;
        color: rgba(255, 255, 255, 0.5) !important;
      }
      .tb-fut {
        background: #1a1233;
        flex: 10;
        color: rgba(255, 255, 255, 0.4) !important;
      }

      .token-legend {
        display: flex;
        flex-wrap: wrap;
        gap: 1rem;
        margin-bottom: 2.5rem;
        font-size: 0.72rem;
        color: var(--w50);
      }

      .token-legend span {
        display: inline-flex;
        align-items: center;
        gap: 0.35rem;
      }

      .token-legend span::before {
        content: "";
        display: inline-block;
        width: 10px;
        height: 10px;
        border-radius: 2px;
      }

      .tl-retro::before {
        background: #c4b3e8;
      }
      .tl-build::before {
        background: #9b85d6;
      }
      .tl-dao::before {
        background: #7d65c1;
      }
      .tl-liq::before {
        background: #6550a8;
      }
      .tl-node::before {
        background: #3d2e6e;
      }
      .tl-fut::before {
        background: #1a1233;
      }

      /* ═══ FOOTER ═══ */
      footer {
        position: relative;
        padding: 5rem 2rem 4rem;
        text-align: center;
        z-index: 1;
      }

      .footer-phrase {
        font-size: clamp(1.3rem, 3vw, 1.8rem);
        font-weight: 300;
        color: var(--white);
        margin-bottom: 2rem;
        max-width: 480px;
        margin-left: auto;
        margin-right: auto;
        line-height: 1.5;
      }
      .footer-links {
        display: flex;
        justify-content: center;
        gap: 1.8rem;
        flex-wrap: wrap;
        margin-bottom: 2.5rem;
      }
      .footer-links a {
        font-size: 0.72rem;
        font-weight: 500;
        color: var(--w30);
        border: none;
        transition: color 0.3s;
      }
      .footer-links a:hover {
        color: var(--w65);
      }
      .footer-end {
        font-size: 0.68rem;
        color: var(--w15);
        letter-spacing: 0.04em;
      }

      /* ═══ EDIT BAR ═══ */
      .edit-bar {
        position: fixed;
        bottom: 0;
        left: 0;
        right: 0;
        z-index: 98;
        height: 88px;
        display: flex;
        flex-direction: column;
        justify-content: center;
        align-items: center;
        padding: 0.6rem 1rem;
        background: rgba(17, 13, 34, 0.92);
        backdrop-filter: blur(16px);
        -webkit-backdrop-filter: blur(16px);
        border-top: 1px solid var(--w08);
        font-size: 0.75rem;
        color: var(--w50);
        gap: 0.5rem;
        transition: transform 0.3s ease;
        text-align: center;
      }

      .edit-bar a {
        color: var(--purple-glow);
        font-weight: 600;
        border: none;
        display: inline-flex;
        align-items: center;
        gap: 0.35rem;
      }

      .edit-bar a:hover {
        color: var(--white);
      }

      .edit-bar svg {
        width: 14px;
        height: 14px;
        fill: currentColor;
      }

      .miniapp-mode .edit-bar {
        bottom: calc(var(--safe-area-bottom, 0px));
      }

      /* ═══ ANIMATION ═══ */
      .fi {
        opacity: 0;
        transform: translateY(22px);
        transition:
          opacity 0.65s ease,
          transform 0.65s ease;
      }
      .fi.visible {
        opacity: 1;
        transform: translateY(0);
      }

      /* ═══ RESPONSIVE ═══ */
      /* ═══ MINIAPP SAFE AREA ═══ */
      .miniapp-wrapper {
        padding-top: var(--safe-area-top, 0px);
        padding-bottom: var(--safe-area-bottom, 0px);
        padding-left: var(--safe-area-left, 0px);
        padding-right: var(--safe-area-right, 0px);
      }

      /* ═══ SHARE CTA (miniapp only) ═══ */
      .share-cta {
        display: none;
        position: fixed;
        bottom: calc(3.5rem + var(--safe-area-bottom, 0px));
        right: 1.5rem;
        z-index: 99;
        padding: 0.75rem 1.4rem;
        background: var(--white);
        color: var(--purple);
        font-size: 0.78rem;
        font-weight: 600;
        border-radius: 100px;
        border: none;
        cursor: pointer;
        box-shadow: 0 8px 32px rgba(0, 0, 0, 0.25);
        transition: all 0.3s;
      }

      .share-cta:hover {
        transform: translateY(-2px);
        box-shadow: 0 12px 40px rgba(0, 0, 0, 0.35);
      }

      .miniapp-mode .share-cta {
        display: flex;
        align-items: center;
        gap: 0.4rem;
      }

      /* ═══ ADD APP BANNER ═══ */
      .add-app-banner {
        display: none;
        position: fixed;
        bottom: calc(6.5rem + var(--safe-area-bottom, 0px));
        left: 50%;
        transform: translateX(-50%);
        z-index: 99;
        padding: 0.7rem 1.6rem;
        background: rgba(26, 18, 51, 0.95);
        backdrop-filter: blur(16px);
        -webkit-backdrop-filter: blur(16px);
        border: 1px solid var(--w15);
        border-radius: 12px;
        color: var(--white);
        font-size: 0.78rem;
        font-weight: 500;
        cursor: pointer;
        white-space: nowrap;
        box-shadow: 0 8px 32px rgba(0, 0, 0, 0.3);
        transition: all 0.3s;
      }

      .add-app-banner:hover {
        border-color: var(--purple-light);
        transform: translateX(-50%) translateY(-2px);
      }

      .miniapp-mode .add-app-banner.show {
        display: block;
      }

      @media (max-width: 768px) {
        nav {
          padding: 0.9rem 1.2rem;
        }
        .nav-links {
          display: none;
        }
        section {
          padding: 4rem 1.4rem;
        }
        .voice {
          padding-left: 1.3rem;
        }
        .raw {
          padding: 1.8rem 1.3rem;
        }
        .layer {
          flex-direction: column;
          gap: 0.3rem;
        }
        .layer-tag {
          min-width: auto;
        }
        .token-card {
          padding: 1.4rem 1.3rem;
        }
        .token-bar > div {
          font-size: 0;
        }
      }

      /* ═══ HAMBURGER MENU ═══ */
      .hamburger {
        display: none;
        background: none;
        border: none;
        cursor: pointer;
        padding: 0.5rem;
        z-index: 102;
        -webkit-tap-highlight-color: transparent;
      }

      .hamburger span {
        display: block;
        width: 20px;
        height: 2px;
        background: var(--white);
        border-radius: 2px;
        transition: all 0.3s ease;
      }

      .hamburger span:nth-child(2) {
        margin: 5px 0;
      }

      .hamburger.open span:nth-child(1) {
        transform: rotate(45deg) translate(5px, 5px);
      }

      .hamburger.open span:nth-child(2) {
        opacity: 0;
      }

      .hamburger.open span:nth-child(3) {
        transform: rotate(-45deg) translate(5px, -5px);
      }

      .mobile-menu {
        position: fixed;
        inset: 0;
        z-index: 101;
        background: rgba(17, 13, 34, 0.97);
        backdrop-filter: blur(24px);
        -webkit-backdrop-filter: blur(24px);
        display: flex;
        flex-direction: column;
        justify-content: center;
        align-items: center;
        opacity: 0;
        pointer-events: none;
        transition: opacity 0.35s ease;
      }

      .mobile-menu.open {
        opacity: 1;
        pointer-events: auto;
      }

      .mobile-menu-inner {
        display: flex;
        flex-direction: column;
        gap: 0.2rem;
        width: 100%;
        max-width: 320px;
        padding: 0 2rem;
      }

      .mobile-menu-label {
        font-size: 0.6rem;
        font-weight: 600;
        letter-spacing: 0.16em;
        text-transform: uppercase;
        color: var(--w30);
        padding: 0 0.8rem;
        margin-bottom: 0.6rem;
      }

      .mobile-menu a {
        display: flex;
        align-items: center;
        gap: 0.8rem;
        padding: 0.85rem 0.8rem;
        color: var(--w65);
        text-decoration: none;
        border: none;
        border-radius: 10px;
        font-size: 0.92rem;
        font-weight: 500;
        transition: all 0.2s ease;
        transform: translateY(12px);
        opacity: 0;
      }

      .mobile-menu.open a {
        transform: translateY(0);
        opacity: 1;
      }

      .mobile-menu a:nth-child(2) {
        transition-delay: 0.04s;
      }
      .mobile-menu a:nth-child(3) {
        transition-delay: 0.08s;
      }
      .mobile-menu a:nth-child(4) {
        transition-delay: 0.12s;
      }
      .mobile-menu a:nth-child(5) {
        transition-delay: 0.16s;
      }
      .mobile-menu a:nth-child(6) {
        transition-delay: 0.2s;
      }
      .mobile-menu a:nth-child(7) {
        transition-delay: 0.24s;
      }
      .mobile-menu a:nth-child(8) {
        transition-delay: 0.28s;
      }
      .mobile-menu a:nth-child(9) {
        transition-delay: 0.32s;
      }
      .mobile-menu a:nth-child(10) {
        transition-delay: 0.36s;
      }

      .mobile-menu a:hover,
      .mobile-menu a:active {
        background: var(--w08);
        color: var(--white);
      }

      .mobile-menu .mm-num {
        font-size: 0.65rem;
        font-weight: 600;
        color: var(--purple-light);
        min-width: 1.4rem;
        letter-spacing: 0.04em;
        opacity: 0.6;
      }

      /* ═══ SHARE BUTTON ON TITLES ═══ */
      .section-heading {
        display: flex;
        align-items: flex-start;
        gap: 0.6rem;
      }

      .section-heading h2 {
        flex: 1;
      }

      .share-btn {
        flex-shrink: 0;
        background: none;
        border: 1px solid var(--w08);
        border-radius: 8px;
        padding: 0.45rem;
        cursor: pointer;
        color: var(--w30);
        transition: all 0.3s;
        margin-top: 0.3rem;
        position: relative;
        -webkit-tap-highlight-color: transparent;
      }

      .share-btn:hover {
        color: var(--purple-glow);
        border-color: var(--w15);
        background: var(--w04);
      }

      .share-btn svg {
        width: 18px;
        height: 18px;
        display: block;
      }

      .share-toast {
        position: fixed;
        bottom: 4.5rem;
        left: 50%;
        transform: translateX(-50%) translateY(10px);
        background: rgba(26, 18, 51, 0.95);
        backdrop-filter: blur(12px);
        -webkit-backdrop-filter: blur(12px);
        border: 1px solid var(--w15);
        color: var(--white);
        font-size: 0.78rem;
        font-weight: 500;
        padding: 0.55rem 1.2rem;
        border-radius: 8px;
        opacity: 0;
        pointer-events: none;
        transition: all 0.3s ease;
        z-index: 200;
        white-space: nowrap;
      }

      .share-toast.show {
        opacity: 1;
        transform: translateX(-50%) translateY(0);
      }

      @media (max-width: 768px) {
        .hamburger {
          display: flex;
          flex-direction: column;
          gap: 0;
        }
      }

      /* ═══ MINIAPP VIEWPORT ═══ */
      @media (max-width: 440px) {
        .hero {
          min-height: auto;
          padding: 5rem 1.2rem 3rem;
        }
        .hero-logo {
          width: 60px;
          height: 60px;
          margin-bottom: 1.5rem;
        }
        .hero h1 {
          font-size: 2rem;
        }
        .hero-sub {
          font-size: 0.95rem;
          margin-bottom: 2rem;
        }
        .hero-badge {
          font-size: 0.62rem;
          margin-bottom: 1.5rem;
        }
        .scroll-hint {
          display: none;
        }
        section {
          padding: 3rem 1.2rem;
        }
        h2 {
          font-size: 1.6rem;
        }
        .pathways {
          grid-template-columns: 1fr;
        }
        .glossary {
          grid-template-columns: 1fr;
        }
        .footer-phrase {
          font-size: 1.2rem;
        }
      }
    </style>
  </head>
  <body>
    <div class="bg"></div>

    <div class="miniapp-wrapper" id="miniapp-wrapper">
      <nav id="nav">
        <a href="#" class="nav-logo">
          <img src="./images/farcaster-logo.jpg" alt="Farcaster" />
          <span>Farcaster</span>
        </a>
        <ul class="nav-links">
          <li><a href="#tldr">TLDR</a></li>
          <li><a href="#truth">What happened</a></li>
          <li><a href="#stayed">We Stayed</a></li>
          <li><a href="#fid">The FID</a></li>
          <li><a href="#build">Build</a></li>
          <li><a href="#token">$$FARCASTER</a></li>
        </ul>
        <button class="hamburger" id="hamburger" aria-label="Menu">
          <span></span>
          <span></span>
          <span></span>
        </button>
      </nav>

      <div class="mobile-menu" id="mobile-menu">
        <div class="mobile-menu-inner">
          <div class="mobile-menu-label">Contents</div>
          <a href="#tldr" class="mm-link"
            ><span class="mm-num">00</span> TLDR</a
          >
          <a href="#farcaster-intro" class="mm-link"
            ><span class="mm-num">I</span> What is this place?</a
          >
          <a href="#truth" class="mm-link"
            ><span class="mm-num">II</span> What happened</a
          >
          <a href="#stayed" class="mm-link"
            ><span class="mm-num">III</span> We stayed</a
          >
          <a href="#fid" class="mm-link"
            ><span class="mm-num">IV</span> The FID</a
          >
          <a href="#ocean" class="mm-link"
            ><span class="mm-num">V</span> The ocean</a
          >
          <a href="#language" class="mm-link"
            ><span class="mm-num">VI</span> The words</a
          >
          <a href="#build" class="mm-link"
            ><span class="mm-num">VII</span> Build</a
          >
          <a href="#token" class="mm-link"
            ><span class="mm-num">VIII</span> $$FARCASTER</a
          >
          <a href="#epilogue" class="mm-link"
            ><span class="mm-num">✦</span> Epilogue</a
          >
        </div>
      </div>

      <!-- ═══════════ HERO ═══════════ -->

      <header class="hero">
        <img
          src="./images/farcaster-logo.jpg"
          alt="Farcaster"
          class="hero-logo"
        />
        <h1>What if the protocol was <strong>ours now?</strong></h1>
        <p class="hero-sub">
          Community centered manifesto for the future of farcaster.
        </p>
      </header>

      <!-- Share toast -->
      <div class="share-toast" id="share-toast">Link copied!</div>

      <div class="content" id="farcaster">$body$</div>

      <!-- ═══════════ FOOTER ═══════════ -->

      <footer>
        <div class="footer-phrase">
          <h2>
            What if the protocol was ours?<br /><strong
              >Let's make it worthy of the people who believe.</strong
            >
          </h2>
        </div>
        <div class="footer-links">
          <a href="https://farcaster.xyz" target="_blank" rel="noopener"
            >Farcaster ↗</a
          >
          <a href="https://docs.farcaster.xyz" target="_blank" rel="noopener"
            >Protocol ↗</a
          >
          <a href="https://docs.neynar.com" target="_blank" rel="noopener"
            >Neynar ↗</a
          >
          <a
            href="https://miniapps.farcaster.xyz"
            target="_blank"
            rel="noopener"
            >Mini Apps ↗</a
          >
          <a
            href="https://snapchain.farcaster.xyz"
            target="_blank"
            rel="noopener"
            >Snapchain ↗</a
          >
          <a
            href="https://github.com/farcasterxyz"
            target="_blank"
            rel="noopener"
            >GitHub ↗</a
          >
        </div>
        <div class="footer-end">
          Written by the community · For the community · Farcaster Protocol ·
          2026
        </div>
      </footer>

      <!-- Share & Add App buttons (miniapp only) -->

      <!-- Sticky edit bar -->
      <div class="edit-bar" id="edit-bar">
        <span>This is a living and co-created document.</span>
        <a
          href="https://github.com/jpfraneto/farcaster-manifesto/edit/main/manifesto.md"
          target="_blank"
          rel="noopener"
        >
          <svg viewBox="0 0 16 16" xmlns="http://www.w3.org/2000/svg">
            <path
              d="M8 0C3.58 0 0 3.58 0 8c0 3.54 2.29 6.53 5.47 7.59.4.07.55-.17.55-.38 0-.19-.01-.82-.01-1.49-2.01.37-2.53-.49-2.69-.94-.09-.23-.48-.94-.82-1.13-.28-.15-.68-.52-.01-.53.63-.01 1.08.58 1.23.82.72 1.21 1.87.87 2.33.66.07-.52.28-.87.51-1.07-1.78-.2-3.64-.89-3.64-3.95 0-.87.31-1.59.82-2.15-.08-.2-.36-1.02.08-2.12 0 0 .67-.21 2.2.82.64-.18 1.32-.27 2-.27.68 0 1.36.09 2 .27 1.53-1.04 2.2-.82 2.2-.82.44 1.1.16 1.92.08 2.12.51.56.82 1.27.82 2.15 0 3.07-1.87 3.75-3.65 3.95.29.25.54.73.54 1.48 0 1.07-.01 1.93-.01 2.2 0 .21.15.46.55.38A8.013 8.013 0 0016 8c0-4.42-3.58-8-8-8z"
            />
          </svg>
          Edit on GitHub
        </a>
      </div>
    </div>
    <!-- /miniapp-wrapper -->

    <script type="module">
      import { sdk } from "https://esm.sh/@farcaster/miniapp-sdk";

      document.addEventListener("DOMContentLoaded", async () => {
        // Fade-in observer
        const obs = new IntersectionObserver(
          (entries) => {
            entries.forEach((e) => {
              if (e.isIntersecting) e.target.classList.add("visible");
            });
          },
          { threshold: 0.06, rootMargin: "0px 0px -30px 0px" },
        );
        document.querySelectorAll(".fi").forEach((el) => obs.observe(el));

        // Nav scroll effect
        const nav = document.getElementById("nav");
        window.addEventListener("scroll", () =>
          nav.classList.toggle("scrolled", window.scrollY > 60),
        );

        // Hamburger menu
        const hamburger = document.getElementById("hamburger");
        const mobileMenu = document.getElementById("mobile-menu");

        hamburger.addEventListener("click", () => {
          const isOpen = hamburger.classList.toggle("open");
          mobileMenu.classList.toggle("open", isOpen);
          document.body.style.overflow = isOpen ? "hidden" : "";
        });

        mobileMenu.querySelectorAll("a").forEach((link) => {
          link.addEventListener("click", () => {
            hamburger.classList.remove("open");
            mobileMenu.classList.remove("open");
            document.body.style.overflow = "";
          });
        });

        // Auto-inject share buttons into section headings
        const shareSvg =
          '<svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M4 12v8a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2v-8"/><polyline points="16 6 12 2 8 6"/><line x1="12" y1="2" x2="12" y2="15"/></svg>';
        document.querySelectorAll(".section-heading").forEach((heading) => {
          if (heading.querySelector(".share-btn")) return;
          const section = heading.closest("section");
          if (!section || !section.id) return;
          const btn = document.createElement("button");
          btn.className = "share-btn";
          btn.dataset.section = section.id;
          btn.setAttribute("aria-label", "Share this section");
          btn.innerHTML = shareSvg;
          heading.appendChild(btn);
        });

        // Share buttons
        const shareToast = document.getElementById("share-toast");
        let toastTimeout;

        function showToast(msg) {
          shareToast.textContent = msg;
          shareToast.classList.add("show");
          clearTimeout(toastTimeout);
          toastTimeout = setTimeout(
            () => shareToast.classList.remove("show"),
            2000,
          );
        }

        document.querySelectorAll(".share-btn").forEach((btn) => {
          btn.addEventListener("click", async () => {
            const section = btn.dataset.section;
            const url =
              window.location.origin + window.location.pathname + "#" + section;
            const title = btn
              .closest(".section-heading")
              .querySelector("h2")
              .textContent.trim();

            if (navigator.share) {
              try {
                await navigator.share({
                  title: "Farcaster Manifesto — " + title,
                  url,
                });
              } catch (e) {
                if (e.name !== "AbortError") {
                  await navigator.clipboard.writeText(url);
                  showToast("Link copied!");
                }
              }
            } else {
              await navigator.clipboard.writeText(url);
              showToast("Link copied!");
            }
          });
        });

        // Scroll to hash on load (anchors from shared links)
        if (window.location.hash) {
          const target = document.querySelector(window.location.hash);
          if (target) {
            // Small delay so layout settles and fade-ins fire
            setTimeout(() => {
              target.scrollIntoView({ behavior: "smooth", block: "start" });
            }, 300);
          }
        }

        // Detect miniapp environment
        const isMiniApp = await sdk.isInMiniApp();

        // Edit bar: open GitHub edit URL using Farcaster miniapp SDK when available,
        // otherwise fall back to a normal browser tab.
        const editBar = document.getElementById("edit-bar");
        if (editBar) {
          const editUrl =
            "https://github.com/jpfraneto/farcaster-manifesto/edit/main/manifesto.md";

          editBar.addEventListener("click", async (event) => {
            event.preventDefault();
            try {
              if (isMiniApp) {
                await sdk.actions.openUrl({ url: editUrl });
              } else {
                window.open(editUrl, "_blank", "noopener");
              }
            } catch (err) {
              console.error(
                "Failed to open edit URL via sdk, falling back:",
                err,
              );
              window.open(editUrl, "_blank", "noopener");
            }
          });
        }

        if (isMiniApp) {
          // Signal ready immediately — hides splash screen
          await sdk.actions.ready();

          document.body.classList.add("miniapp-mode");

          // Apply safe area insets
          const context = sdk.context;
          if (context?.client?.safeAreaInsets) {
            const { top, bottom, left, right } = context.client.safeAreaInsets;
            const wrapper = document.getElementById("miniapp-wrapper");
            wrapper.style.setProperty("--safe-area-top", top + "px");
            wrapper.style.setProperty("--safe-area-bottom", bottom + "px");
            wrapper.style.setProperty("--safe-area-left", left + "px");
            wrapper.style.setProperty("--safe-area-right", right + "px");
          }

          // Enable back navigation
          const capabilities = await sdk.getCapabilities();
          if (capabilities.includes("back")) {
            await sdk.back.enableWebNavigation();
          }

          // Share button
          document
            .getElementById("share-cta")
            .addEventListener("click", async () => {
              try {
                await sdk.actions.composeCast({
                  text: "The protocol is ours now.\n\nRead the Farcaster Manifesto — written by the people who stayed.",
                  embeds: ["https://farcaster.lat"],
                });
              } catch (e) {
                console.error("Compose cast failed:", e);
              }
            });

          // Add app button (only if not already added)
          if (!context?.client?.added) {
            const addBanner = document.getElementById("add-app-banner");
            addBanner.classList.add("show");
            addBanner.addEventListener("click", async () => {
              try {
                await sdk.actions.addMiniApp();
                addBanner.classList.remove("show");
              } catch (e) {
                console.error("Add miniapp failed:", e);
              }
            });
          }
        }
      });
    </script>
  </body>
</html>
